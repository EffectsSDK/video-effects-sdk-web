# General Error Handling

The SDK provides a list of effects, some of which are based on machine learning and require additional resources, such as inference engines and machine learning models. All effects that do not use machine learning are initialized by default within the SDK. For machine learning-based effects, the SDK allows you to control which models and effects should be loaded.

Because of this difference, the error messages you receive from the SDK may be related to either of the following:

 - General SDK functionality (e.g., initialization, rendering)
 - Specific effects in the processing pipeline (e.g., effect/model initialization, issues with inference engines or CPU/GPU providers)

The SDK also provides an onError callback where messages are delivered with one of three severity levels: info, warning, or error.

The structure of each message is as follows:

```
export interface ErrorObject {
  message: string; //User-readable message generated by the SDK
  type: ErrorType; //Message severity level
  code?: ErrorCode; //Code to identify specific cases and respond accordingly. Not all messages include a code
  emitter?: ErrorEmitter; //SDK module where the message was emitted
  cause?: Error; //The original error captured by the SDK
  data?: any; //Additional custom data
}
```

List of available codes:
```
export enum ErrorCode {
  // INFO - The SDK is falling back to CPU WASM mode due to a WebGPU error or lack of WebGPU support in the user agent.
  CPU_FALLBACK = 3001, 

  // INFO - ML model session was successfully initialized.
  SESSION_INITIALIZATION_SUCCESS = 3020,

  // INFO - Effects with ML functionality were successfully initialized.
  EFFECT_INITIALIZATION_SUCCESS = 3021, 


  // ERROR - The SDK was unable to initialize the Renderer.
  // In this case, the SDK will not be usable.
  APP_CREATION_ISSUE = 1002, 

  // ERROR - The provided MediaStream does not contain a video track for processing.
  NO_VIDEO_TRACK = 1030, 

  // ERROR - The session server does not allow initialization.
  SESSION_INITIALIZATION_FAILED = 1020, 

  // ERROR - Network issue: the session server is not reachable, or incorrect WASM files are being used.
  SESSION_INITIALIZATION_ISSUE = 1021, 


  // ERROR - GPU device was lost due to a video driver crash or manual destruction.
  // The SDK will attempt to automatically fall back to the CPU WASM provider.
  GPU_DEVICE_LOST = 1001,


  // ERROR - Uncaptured errors from the GPU detected.
  // The SDK will attempt to automatically fall back to the CPU WASM provider.
  GPU_UNCAPTUREDERROR = 1010,   

  // ERROR - The SDK is unable to load the ML model file.
  LOADER_ISSUE = 1023, 

  // ERROR - Segmentation preset not found. Please check your sdk.config.
  PRESET_ISSUE = 1024,

  // ERROR - ML model was not initialized. 
  MODEL_INITIALIZATION_ISSUE = 1022,

  // ERROR - Similar to error 1022 (the reason may not be related to model loading). 
  EFFECT_INITIALIZATION_ISSUE = 1025, 

  // ERROR - An error was captured while running ML models at runtime.
  INFERENCE_RUN_ISSUE = 1040, 

  // ERROR - An error occurred during runtime rendering.
  RENDERING_ISSUE = 1050, 
}
```

These are critical errors indicating that the SDK cannot be used. You need to handle them in your application:

```
APP_CREATION_ISSUE = 1002
SESSION_INITIALIZATION_FAILED = 1020
SESSION_INITIALIZATION_ISSUE = 1021
NO_VIDEO_TRACK = 1030
```

These are less critical issues that may be temporary. For example, you might encounter errors during inference while the SDK is falling back to the CPU WASM provider due to a WebGPU issue. We recommend monitoring these errors over time. If they persist for more than 2â€“3 seconds, it likely indicates a persistent issue, and you should consider disabling the SDK or bypassing the original stream.

```
GPU_DEVICE_LOST = 1001
GPU_UNCAPTUREDERROR = 1010
INFERENCE_RUN_ISSUE = 1040
RENDERING_ISSUE = 1050
ENQUEUE_FRAME_ISSUE = 1060
READABLE_STREAM_ISSUE = 1061
```

This is a list of errors related to specific effects. In these cases, all other SDK functionality should continue to work correctly.

```
SESSION_INITIALIZATION_FAILED = 1020
SESSION_INITIALIZATION_ISSUE = 1021
LOADER_ISSUE = 1023
PRESET_ISSUE = 1024
MODEL_INITIALIZATION_ISSUE = 1022
EFFECT_INITIALIZATION_ISSUE = 1025
```